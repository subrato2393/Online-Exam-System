@model OnlineExams.Models.View_Model.CourseEditVM
@{
    /**/

    ViewBag.Title = "Edit";
}
<!DOCTYPE html>
<html>
<head>
    <title>Online Exam</title>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="~/concept-master/assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    @*<link href="~/Content/bootstrap.css" rel="stylesheet" />*@
    @*<link href="~/Content/sweetalert/sweet-alert.css" rel="stylesheet" />*@
    @*<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />*@
    @*<script src="~/Scripts/jquery-3.3.1.min.js"></script>*@
    @*<script src="~/Scripts/Jquery durationpicker/duration-picker.js"></script>*@
    @*<script src="~/Scripts/jquery-ui-1.12.1.js"></script>*@
    @*<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>*@
    @*<style>
            .panel.with-nav-tabs .panel-heading {
                padding: 5px 5px 0 5px;
            }

            .panel.with-nav-tabs .nav-tabs {
                border-bottom: none;
            }

            .panel.with-nav-tabs .nav-justified {
                margin-bottom: -1px;
            }

            .with-nav-tabs.panel-primary .nav-tabs > li > a,
            .with-nav-tabs.panel-primary .nav-tabs > li > a:hover,
            .with-nav-tabs.panel-primary .nav-tabs > li > a:focus {
                color: #fff;
            }

                .with-nav-tabs.panel-primary .nav-tabs > .open > a,
                .with-nav-tabs.panel-primary .nav-tabs > .open > a:hover,
                .with-nav-tabs.panel-primary .nav-tabs > .open > a:focus,
                .with-nav-tabs.panel-primary .nav-tabs > li > a:hover,
                .with-nav-tabs.panel-primary .nav-tabs > li > a:focus {
                    color: #fff;
                    background-color: #3071a9;
                    border-color: transparent;
                }

            .with-nav-tabs.panel-primary .nav-tabs > li.active > a,
            .with-nav-tabs.panel-primary .nav-tabs > li.active > a:hover,
            .with-nav-tabs.panel-primary .nav-tabs > li.active > a:focus {
                color: #428bca;
                background-color: #fff;
                border-color: #428bca;
                border-bottom-color: transparent;
            }
        </style>*@

</head>
<body>
    <h2 style="color:green" id="courseName">Course Name:@Model.Name</h2>
    <div class="col-md-offset-9">
        <h3>@Html.ActionLink("< Search", "Index")</h3>
    </div>
    <div id="tabs" class="container">
        @*<h2>Toggleable Tabs</h2>*@
        @*<li class="active"><a href="#tab1" data-toggle="tab">Basic Info</a></li>
            <li><a href="#tab2" data-toggle="tab">Assign Trainers</a></li>
            <li><a href="#tab3" data-toggle="tab">Create Exams</a></li>*@
        <!-- Nav tabs -->
        <ul class="nav nav-pills" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#tab1">Basic Info</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#tab2">Assign Trainers</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#tab3">Create Exams</a>
            </li>
        </ul>


        <div class="tab-content">

            <div class="container tab-pane active" id="tab1">
                @using (Ajax.BeginForm("Edit", "Courses", new AjaxOptions() { HttpMethod = "POST", OnSuccess = "courseUpdateSuccess", OnFailure = "courseUpdateFail" }))
                {
                    @Html.AntiForgeryToken()
                    <div class="form-horizontal">
                        @*<h2 style="color:green" id="courseName">Course Name :@Model.Name</h2>
                            <div class="col-md-offset-9">
                                @Html.ActionLink("< Search", "Index")
                            </div>*@<hr />
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.Id)
                        <div class="form-group">
                            @Html.LabelFor(model => model.OrganizationId, "Organization", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-7">
                                @Html.DropDownList("OrganizationId", Model.OrganizationLookUps, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.CourseCode, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.CourseCode, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.CourseCode, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.CourseDuration, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.CourseDuration, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.CourseDuration, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Credit, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.Credit, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Credit, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.CourseOutLine, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.CourseOutLine, new { @class = "ckeditor" })
                                @Html.ValidationMessageFor(model => model.CourseOutLine, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <input type="submit" id="courseUpdate" value="Update" class="btn btn-default" />
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="tab-pane fade" id="tab2">
                @using (Ajax.BeginForm("CourseAssignToTrainer", "Courses", new AjaxOptions() { HttpMethod = "POST", OnSuccess = "courseAssignSuccess", OnFailure = "courseAssignFail" }))
                {

                    <div class="form-group">
                        @Html.Label("TrainerDropdown", "Trainer", new { @class = "col-md-2" })
                        <div class="col-md-10">
                            @Html.DropDownList("TrainerDropDown", Model.TrainerLookUps, new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.Label("LeadTrainer", "Lead?", new { @class = "col-md-2" })
                        <div class="col-md-10">
                            @Html.RadioButton("LeadTrainer", new { @checked = false })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-6 col-md-5">
                            <input type="button" id="addTrainerButton" value="Add >" class="btn btn-success" />
                        </div>
                    </div>
                    <div class="form-horizontal">

                        <table class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>
                                        Trainer
                                    </th>
                                    <th>
                                        Lead Trainer?
                                    </th>
                                    <th>
                                        Action
                                    </th>
                                </tr>

                            </thead>
                            <tbody id="tbTrainer"></tbody>
                        </table>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-11 col-md-5">
                            <input type="submit" value="Assign" class="btn btn-primary" />
                        </div>
                    </div>
                }
            </div>
            <div class="tab-pane fade" id="tab3">
                @using (Ajax.BeginForm("CreateExam", "Courses", new AjaxOptions() { HttpMethod = "POST", OnSuccess = "createExamSuccess", OnFailure = "createExamFail" }))
                {
                    @Html.AntiForgeryToken()
                    <div class="form-horizontal">

                        <hr />
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.Id)
                        <div class="form-group">
                            @Html.LabelFor(model => model.OrganizationId, "Organization", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("OrganizationIds", Model.OrganizationLookUps, htmlAttributes: new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.OrganizationId, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("Course", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("CourseId", Model.CourseLookUps, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("ExamType", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("ExamType", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("ExamType", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("ExamCode", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-2">
                                @Html.Editor("ExamCode", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("ExamCode", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Topic", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("Topic", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("Topic", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("FullMarks", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-2">
                                @Html.Editor("FullMarks", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("FullMarks", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Duration", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @*<input type="text" id="Duration" name="duration">*@
                                @Html.Editor("Duration", null, new { htmlAttributes = new { @class = "form-control" } })

                                @Html.ValidationMessage("Duration", "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("SerialNo", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-2">
                                @Html.Editor("SerialNo", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("SerialNo", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-offset-6 col-md-5">
                                <input type="button" id="createExam" value="Add >" class="btn btn-success" />
                            </div>
                        </div>
                        <div class="form-horizontal">
                            <h3>Exam List</h3>
                            <table class="table table-bordered table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            SL No
                                        </th>
                                        <th>
                                            Type
                                        </th>
                                        <th>
                                            Code
                                        </th>
                                        <th>
                                            Topic
                                        </th>
                                        <th>
                                            Full Marks
                                        </th>
                                        <th>
                                            Duration
                                        </th>

                                        <th>
                                            Action
                                        </th>
                                        @*<th>
                                                Action (Edit)
                                            </th>
                                            <th>
                                                Action (Remove)
                                            </th>*@
                                    </tr>
                                </thead>
                                <tbody id="tbExam"></tbody>
                                @*<tbody id="tb">
                                        <tr>
                                            <td>Type</td>
                                            <td>Code</td>
                                            <td>Topic</td>
                                            <td>Full Marks</td>
                                            <td>Duration</td>
                                        </tr>
                                    </tbody>*@
                            </table>
                            @*<a><span class="glyphicon glyphicon-edit"></span></a>*@
                            @*<span class='glyphicon glyphicon-eye-open'></span>*@
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-11 col-md-5">
                                <input type="submit" value="Save" class="btn btn-primary" />
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    </div>
    </div>

    @*Create a popup window for edit exam record*@

    <div class="modal fade" id="EditConfirmation">
        <div class="modal-dialog">
            <div class="modal-content">
                @*<a href="~/Scripts/jquery-3.3.1.slim.min.map">~/Scripts/jquery-3.3.1.slim.min.map</a>*@
                <div class="modal-header">
                    <h4>Update  Record</h4>
                    <a href="#" class="close" data-dismiss="modal">&times;</a>

                </div>
                <div class="modal-body">
                    <div class="form-horizontal">


                        <div class="form-group">
                            @Html.Label("ExamType", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("ExamTypes", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("ExamType", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("ExamCode", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("ExamCodes", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("ExamCode", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Topic", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("Topics", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("Topic", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("FullMarks", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("FullMark", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("FullMarks", "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.Label("Duration", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.Editor("Durations", new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessage("Duration", "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" data-dismiss="modal">Cancel</a>
                    <button type='button' id='updateButton' class='btn btn-success'>Update</button>
                </div>
            </div>
        </div>
    </div>

    @*Create a popup window for edit exam record*@
    <div class="modal fade" id="EditTrainer">
        <div class="modal-dialog">
            <div class="modal-content">
                @*<a href="~/Scripts/jquery-3.3.1.slim.min.map">~/Scripts/jquery-3.3.1.slim.min.map</a>*@
                <div class="modal-header">
                    <h4>Update Trainer Record</h4>
                    <a href="#" class="close" data-dismiss="modal">&times;</a>

                </div>
                <div class="modal-body">
                    <div class="form-horizontal">


                        <div class="form-group">
                            @Html.Label("TrainerDropdown", "Trainer", new { @class = "col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("TrainerDropDowns", Model.TrainerLookUps, new { @class = "form-control", @disabled = "disabled" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("LeadTrainer", "Lead?", new { @class = "col-md-2" })
                            <div class="col-md-10">
                                @Html.RadioButton("LeadTrainers", new { @checked = false })
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" data-dismiss="modal">Cancel</a>
                    <button type='button' id='updateTrainerButton' class='btn btn-success'>Update</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="ViewExam">
        <div class="modal-dialog">
            <div class="modal-content">
                @*<a href="~/Scripts/jquery-3.3.1.slim.min.map">~/Scripts/jquery-3.3.1.slim.min.map</a>*@
                <div class="modal-header">
                    <h4>View Exam Record</h4>
                    <a href="#" class="close" data-dismiss="modal">&times;</a>

                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-md-10">
                                Exam Type : <label id="ExamTypeLabel"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10">
                                Exam Code : <label id="ExamCodeLabel"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10">
                                Full Marks : <label id="FullMarksLabel"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10">
                                Duration : <label id="DurationLabel"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-10">
                                Serial No : <label id="SerialNoLabel"></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" data-dismiss="modal">Cancel</a>

                </div>
            </div>
        </div>
    </div>
</body>
</html>
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @*<link href="~/Content/bootstrap.css" rel="stylesheet" />
                <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />*@
        @*<script src="~/concept-master/assets/vendor/jquery/jquery-3.3.1.min.js"></script>*@

                @*<link href="~/Scripts/durationpicker/duration-picker.css" rel="stylesheet" />
    @*<script src="~/Scripts/jquery-ui.js"></script>*@
    @*<script src="~/Scripts/jquery-ui-1.12.1.js"></script>

        <script src="~/Scripts/jquery-3.3.1.js"></script>
        <script src="~/Scripts/bootstrap.js"></script>*@
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    @*<script src="~/Scripts/jquery-3.3.1.min.js"></script>*@
    @*<script src="~/Scripts/durationpicker/duration-picker.js"></script>*@
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    @*@Scripts.Render("~/bundles/jqueryval")*@*



    <script type="text/javascript">

        //Exam Duration

        $(function () {
            $("#tabs").tabs();
        });
        //Course Update
        $('#courseUpdate').click(function () {
            var courseNames = $('#Name').val();
            $('#courseName').empty();
            $('#courseName').append(courseNames);
        });

        //Radio Button Checked or Unchecked for add trainer
        $(function () {
            $('input[name="LeadTrainer"]').click(function () {
                var $radio = $(this);

                // if this was previously checked
                if ($radio.data('waschecked') == true) {
                    $radio.prop('checked', false);
                    $radio.data('waschecked', false);
                }
                else
                    $radio.data('waschecked', true);
            });
        });
        $(function () {
            $('input[name="LeadTrainers"]').click(function () {
                var $radio = $(this);

                // if this was previously checked
                if ($radio.data('waschecked') == true) {
                    $radio.prop('checked', false);
                    $radio.data('waschecked', false);
                }
                else
                    $radio.data('waschecked', true);
            });
        });
        //Assign trainer
        var index = 0;
        $('#addTrainerButton').click(function () {

            var trainer = getTrainer();
            var par = $(this).parent().parent(); //tr
            var tdTrainerName = par.children("td:nth-child(0)");
            var tdIsLead = par.children("td:nth-child(1)");
            var action = par.children("td:nth-child(2)");



            tdTrainerName = "<td><input name='Trainers[" + index + "].trainerid' type='hidden' value='" + trainer.TrainerId + "'>" + "<input name='Trainers[" + index + "].courseid' type='hidden' value='" + trainer.CourseId + "'>" + "<input name='Trainers[" + index + "].Name' type='hidden' value='" + trainer.TrainerName + "'>" + trainer.TrainerName + "</td>"
            if (trainer.IsLead == true) {
                tdIsLead = "<td><input name='Trainers[" + index + "].isLead' id='radio' type='radio' value='" + trainer.IsLead + "' disabled checked/>" + '' + "</td>"

            }
            else {
                tdIsLead = "<td><input name='Trainers[" + index + "].isLead' id='radio' type='radio' value='" + trainer.IsLead + "' disabled />" + '' + "</td>"
            }

            action = "<td><a href='#' id='edittrainerbtn'>Edit</>     |   <a href='#' id='deletetrainerbtn'>Remove</> </td>"
            //action = "<td><button type='button' id='edittrainerbtn'></button>Edit   | <button type='button' id='deletetrainerbtn' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-trash'></span></button> </td>"


            var createrow = "<tr>" + tdTrainerName + tdIsLead + action + "</tr>"
            $('#tbTrainer').append(createrow);
            ++index;
        })

        function getTrainer() {

            var trainerId = $('#TrainerDropDown').val();
            var trainerName = $('#TrainerDropDown :selected').text();
            //var isLead = $('input[name=LeadTrainer]:checked').val();

            var isLead = $('#LeadTrainer').is(':checked');
            //var isLead = $("input[name='LeadTrainer']:checked").text();
            //var isLead = $("input:radio[name='LeadTrainer']").is(":checked");
            //var isLead = $('#LeadTrainer:checked').val() ? true : false;


            var courseId=@Model.Id;

            var trainer = {
                TrainerId: trainerId,
                TrainerName: trainerName,
                CourseId: courseId,
                IsLead: isLead

            }

            return trainer;
        }

        var index = 0;
        //var slNo = 0;
        $('#createExam').click(function () {
            //++slNo;
            var exam = getExam();

            var par = $(this).parent().parent(); //tr
            var slNo = par.children("td:nth-child(1)");
            var tdExamType = par.children("td:nth-child(2)");
            var tdExamCode = par.children("td:nth-child(3)");
            var tdExamTopic = par.children("td:nth-child(4)");
            var tdFullMarks = par.children("td:nth-child(5)");
            var tdDurations = par.children("td:nth-child(6)");
            var action = par.children("td:nth-child(7)");

                slNo = "<td ><input type='hidden'  value='" + exam.SerialNo + "'>" + exam.SerialNo + "</td>"
                tdExamType = "<td ><input name='Exams[" + index + "].courseid'  type='hidden' value='" + exam.CourseId + "'>" + "<input name='Exams[" + index + "].examType'  id='exmtype' type='hidden' value='" + exam.ExamType + "'>" + exam.ExamType + "</td>"
                tdExamCode = "<td ><input name='Exams[" + index + "].examCode'  type='hidden'  value='" + exam.ExamCode + "'>" + exam.ExamCode + "</td>"
                tdExamTopic = "<td ><input name='Exams[" + index + "].topic'  type='hidden' value='" + exam.Topic + "'>" + exam.Topic + "</td>"
                tdFullMarks = "<td ><input name='Exams[" + index + "].fullMarks'  type='hidden' value='" + exam.FullMarks + "'>" + exam.FullMarks + "</td>"
                tdDurations = "<td ><input name='Exams[" + index + "].duration'  type='hidden' value='" + exam.Duration + "'>" + exam.Duration + "</td>"
            action = "<td><a href='#' id='viewbtn'>View</>   |   <a href='#' id='btn'>Edit</>    |   <a href='#' id='deletebtn'>Delete</> </td>"


                var createrow = "<tr id='createRow'>" + slNo + tdExamType + tdExamCode + tdExamTopic + tdFullMarks + tdDurations + action + "</tr>"

            var exmtype = $('#ExamType').val().trim();
            var exmcode = $('#ExamCode').val().trim();
            var exmtopic = $('#Topic').val().trim();
            var marks = $('#FullMarks').val().trim();
            var slno = $('#SerialNo').val().trim();
            var duration = $('#Duration').val().trim();
            if (exmtype.length == 0 || exmcode.length == 0 || exmtopic.length == 0 || marks.length == 0 || slno.length == 0 || duration.length==0) {
                swal({
                    text: "Please provide all necessary information !",
                })
            }
            else {
                $('#tbExam').append(createrow);
                $('#ExamType').val("");
                $('#ExamCode').val("");
                $('#Topic').val("");
                $('#FullMarks').val("");
                $('#Duration').val("");
                $('#SerialNo').val("");
                ++index;
            }
        })


         //Create popup model for edit exam record
        var currrow = null;
        $('#tbExam').on('click', '#btn', function () {
            currrow = $(this).closest('tr');

            var examType = currrow.find('td:eq(1)').text();
            var examCode = currrow.find('td:eq(2)').text();
            var topics = currrow.find('td:eq(3)').text();
            var fullMarks = currrow.find('td:eq(4)').text();
            var duration = currrow.find('td:eq(5)').text();
            $("#ExamTypes").val(examType);
            $("#ExamCodes").val(examCode);
            $("#Topics").val(topics);
            $("#FullMark").val(fullMarks);
            $("#Durations").val(duration);
            $('#EditConfirmation').modal("show");

        })
        //if (!$('#tbTrainer input[value=""]').length) {
            // do something
        //}
        $('#tbTrainer').on('click', '#edittrainerbtn', function () {
            var trainer = getTrainer();

            currrow = $(this).closest('tr');
            var trainername = currrow.find('td:eq(0)').text();
            var islead = currrow.find('td:eq(1)').text();

            //if (trainer.IsLead == true) {

            //}
            //for modal dropdownlist empty
            var option = $('<option></option>').attr("value", "option value").text(trainername);
            $("#TrainerDropDowns").empty().append(option);

            $('#TrainerDropDowns :selected').text(trainername);
            $("input[name='LeadTrainers']:checked").val(islead)
            $('#EditTrainer').modal("show");

        });
        // Create a modal popup for update exam
        $('#updateButton').click(function () {

            $('#EditConfirmation').modal("hide");

            if (currrow)
            {
                var examType = $("#ExamTypes").val();
                var examCode  = $("#ExamCodes").val();
                var topics = $("#Topics").val();
                var fullMarks = $("#FullMark").val();
                var duration = $("#Durations").val();

                currrow.find('td:eq(1)').text(examType);
                currrow.find('td:eq(2)').text(examCode);
                currrow.find('td:eq(3)').text(topics);
                currrow.find('td:eq(4)').text(fullMarks);
                currrow.find('td:eq(5)').text(duration);
                swal("Success!", "Update Successfully", "success");

            }
        })
        $('#updateTrainerButton').click(function () {

            $('#EditTrainer').modal("hide");

            if (currrow) {
                var trainername = $("#TrainerDropdowns").val();
                var islead = $("#LeadTrainers").text();

                currrow.find('td:eq(0)').text(trainername);
                currrow.find('td:eq(1)').text(islead);
                swal("Success!", "Update Successfully", "success");

            }
        })

        //Create a Modal popup for Delete Exam Record
        $('#tbExam').on('click', '#deletebtn', function () {
            currrow = $(this).closest('tr');
            swal({
                title: "Are you sure?",
                text: "You want to Delete this row!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        currrow.remove();
                        swal("Success!", "Delete Successfully", "success");
                    }
                });

        })
        //Create a Modal popup for Delete assign trainer Record
        $('#tbTrainer').on('click', '#deletetrainerbtn', function () {
            currrow = $(this).closest('tr');
            swal({
                title: "Are you sure?",
                text: "You want to Delete this row!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        currrow.remove();
                        swal("Success!", "Delete Successfully", "success");
                    }
                });

        })


        //Create a popup for View
        $('#tbExam').on('click', '#viewbtn', function () {
            currrow = $(this).closest('tr');
            $('#ViewExam').modal("show");
            var slNo = currrow.find('td:eq(0)').text();
            var examType = currrow.find('td:eq(1)').text();
            var examCode = currrow.find('td:eq(2)').text();
            var topics = currrow.find('td:eq(3)').text();
            var fullMarks = currrow.find('td:eq(4)').text();
            var duration = currrow.find('td:eq(5)').text();
            $("#ExamTypeLabel").html(examType);
            $("#ExamCodeLabel").html(examCode);
            $("#ExamTopicLabel").html(topics);
            $("#FullMarksLabel").html(fullMarks);
            $("#DurationLabel").html(duration);
            $("#SerialNoLabel").html(slNo);
        })


        //Create popup model for edit trainer information
        function DeleteTrainer(CourseId) {
            $('#CourseId').val(CourseId);
            $('#DeleteConfirmation').modal("show");
        }

        //create popup model for delete
        //function EditTrainer(CourseId) {
        //    $('#EditTrainer').modal("show");

        //}


        function getExam() {
            var organizationId = $('#OrganizationIds').val();
            var courseId = $('#CourseId').val();
            var examType = $('#ExamType').val();
            var examCode = $('#ExamCode').val();
            var topic = $('#Topic').val();
            var fullMarks = $('#FullMarks').val();
            var duration = $('#Duration').val();
            var sl = $('#SerialNo').val();

            var exam = {
                OrganizationId: organizationId,
                CourseId: courseId,
                ExamType: examType,
                ExamCode: examCode,
                Topic: topic,
                FullMarks: fullMarks,
                Duration: duration,
                SerialNo: sl
            }
            return exam;
        }

        //create exam section ajax calling

        $(document).ready(function () {
            $('#OrganizationIds').change(function () {
                var organizationid = $('#OrganizationIds').val();
                var data = { organizationId: organizationid };
                $.ajax({
                    type: "POST",
                    url: "/trainers/getCourse",
                    data: JSON.stringify(data),
                    contentType: "application/json",
                    success: function (response) {
                        var courseDropDown = $('#CourseId');
                        courseDropDown.empty();
                        var defaultOption = "<option value=''>....Select...</option>";
                        courseDropDown.append(defaultOption);
                        $.each(response, function (key, course) {
                            var option = "<option value='" + course.Id + "'>" + course.Name + "</option>";
                            courseDropDown.append(option);
                        });
                    },
                    error: function (response) {
                        alert("Error!");
                    }
                });

            })


            //2. get json response and bind data in trainee dropdown

        });

        function courseUpdateSuccess() {
            alert("Course Update Successfully");
        }
        function courseUpdateFail(response) {
            alert("Course Update Failed");
        }
        function courseAssignSuccess() {
            alert("Course Assign Successfully");
        }
        function courseAssignFail(){
            alert("Course Assign Fail");
        }
        function createExamSuccess() {
            alert("Create exam Successfully");
        }
        function createExamFail() {
            alert("Create exam Fail");
        }


    </script>
}
